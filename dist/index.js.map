{"version":3,"sources":["../routes/index.js","../routes/api.js","app.js","index.js"],"names":["express","require","fs","router","Router","get","req","res","next","render","module","exports","config","createError","path","logger","sassMiddleware","compression","indexRouter","apiRouter","app","set","join","__dirname","use","json","urlencoded","extended","src","dest","indentedSyntax","sourceMap","outputStyle","prefix","static","err","locals","message","error","status","debug","http","port","normalizePort","process","env","PORT","server","createServer","listen","on","onError","onListening","val","parseInt","isNaN","syscall","bind","code","console","exit","addr","address"],"mappings":"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","file":"index.js","sourceRoot":"../src","sourcesContent":["var express = require('express');\nconst fs = require(\"fs\");\nvar router = express.Router();\n\n/* GET home page. */\nrouter.get('/', function(req, res, next) {\n    res.render('home');\n});\n\nmodule.exports = router;\n","const express = require('express');\nconst router = express.Router();\n\nmodule.exports = router;\n","require('dotenv').config();\n// require('dotenv').config({ path: '/app/srv/www/.env'});\n\nconst createError = require('http-errors');\nconst express = require('express');\nconst path = require('path');\nconst logger = require('morgan');\nconst sassMiddleware = require('node-sass-middleware');\nconst compression = require('compression');\n\nconst indexRouter = require('../routes/index');\nconst apiRouter = require('../routes/api');\n\nconst app = express();\n\n// view engine setup\napp.set('views', path.join(__dirname, '../views'));\napp.set('view engine', 'pug');\n\napp.use(logger('dev'));\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\napp.use(sassMiddleware({\n  src: path.join(__dirname, '../src/sass'),\n  dest: path.join(__dirname, '../public/stylesheets'),\n  indentedSyntax: true, // true = .sass and false = .scss\n  sourceMap: false,\n  outputStyle: 'compressed',\n  prefix: '/stylesheets'\n}));\napp.use(express.static(path.join(__dirname, '../public')));\napp.use(compression());\n\napp.use('/', indexRouter);\napp.use('/api', apiRouter);\n\n// External things\napp.use('/mod/bs', express.static(path.join(__dirname, '../node_modules/bootstrap/dist')));\napp.use('/mod/jq', express.static(path.join(__dirname, '../node_modules/jquery/dist')));\napp.use('/mod/ol', express.static(path.join(__dirname, '../node_modules/ol')));\napp.use('/mod/fa', express.static(path.join(__dirname, '../node_modules/font-awesome/css')));\napp.use('/mod/ol-ls', express.static(path.join(__dirname, '../node_modules/ol-layerswitcher/src')));\napp.use('/mod/ol-cm', express.static(path.join(__dirname, '../node_modules/ol-contextmenu/dist')));\napp.use('/mod/ol-pu', express.static(path.join(__dirname, '../node_modules/ol-popup/src')));\n\n// catch 404 and forward to error handler\napp.use(function (req, res, next) {\n  next(createError(404));\n});\n\n// error handler\napp.use(function (err, req, res, next) {\n  // set locals, only providing error in development\n  res.locals.message = err.message;\n  res.locals.error = req.app.get('env') === 'development' ? err : {};\n\n  // render the error page\n  res.status(err.status || 500);\n  res.render('error');\n});\n\nmodule.exports = app;\n","/**\n * Module dependencies.\n */\n\nvar app = require('./app');\nvar debug = require('debug')('civil-site:server');\nvar http = require('http');\n\n/**\n * Get port from environment and store in Express.\n */\n\nvar port = normalizePort(process.env.PORT || '3000');\napp.set('port', port);\n\n/**\n * Create HTTP server.\n */\n\nvar server = http.createServer(app);\n\n/**\n * Listen on provided port, on all network interfaces.\n */\n\nserver.listen(port);\nserver.on('error', onError);\nserver.on('listening', onListening);\n\n/**\n * Normalize a port into a number, string, or false.\n */\n\nfunction normalizePort(val) {\n  var port = parseInt(val, 10);\n\n  if (isNaN(port)) {\n    // named pipe\n    return val;\n  }\n\n  if (port >= 0) {\n    // port number\n    return port;\n  }\n\n  return false;\n}\n\n/**\n * Event listener for HTTP server \"error\" event.\n */\n\nfunction onError(error) {\n  if (error.syscall !== 'listen') {\n    throw error;\n  }\n\n  var bind = typeof port === 'string'\n    ? 'Pipe ' + port\n    : 'Port ' + port;\n\n  // handle specific listen errors with friendly messages\n  switch (error.code) {\n    case 'EACCES':\n      console.error(bind + ' requires elevated privileges');\n      process.exit(1);\n      break;\n    case 'EADDRINUSE':\n      console.error(bind + ' is already in use');\n      process.exit(1);\n      break;\n    default:\n      throw error;\n  }\n}\n\n/**\n * Event listener for HTTP server \"listening\" event.\n */\n\nfunction onListening() {\n  var addr = server.address();\n  var bind = typeof addr === 'string'\n    ? 'pipe ' + addr\n    : 'port ' + addr.port;\n  debug('Listening on ' + bind);\n}\n"]}